
# æ‘˜è¦
æœ¬æ–‡ä»‹ç»äº†ä¸€ä¸ªä½¿ç”¨GraphRAGå’Œé€šä¹‰åƒé—®APIåˆ†æå·æ™®æªå‡»äº‹ä»¶çš„æ–¹æ³•ã€‚ç”±äºGraphRAGç›®å‰åªæ”¯æŒOpenAI APIï¼Œé‡‡ç”¨One-Apiå°†é€šä¹‰è½¬æˆäº†OpenAI APIé£æ ¼çš„æ¥å£ã€‚

# GraphRAG ä»‹ç»
&nbsp;&nbsp;å¾®è½¯æœ€è¿‘å¼€æºäº†åä¸ºGraphRAGçš„æŠ€æœ¯ï¼Œè¿™æ˜¯ä¸€ç§ç»“åˆäº†æ–‡æœ¬æå–ã€ç½‘ç»œåˆ†æä»¥åŠå¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰æç¤ºå’Œæ€»ç»“çš„ç«¯åˆ°ç«¯ç³»ç»Ÿï¼Œæ—¨åœ¨ä¸°å¯Œåœ°ç†è§£æ–‡æœ¬æ•°æ®é›†ã€‚GraphRAGä»£è¡¨äº†ä¸€ç§ç»“æ„åŒ–ã€å±‚æ¬¡åŒ–çš„æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ–¹æ³•ï¼Œä¸ä¼ ç»Ÿçš„åŸºäºçº¯æ–‡æœ¬ç‰‡æ®µçš„è¯­ä¹‰æœç´¢æ–¹æ³•ä¸åŒã€‚  
&nbsp;&nbsp;GraphRAGé€šè¿‡ä»åŸå§‹æ–‡æœ¬ä¸­æå–çŸ¥è¯†å›¾è°±ï¼Œå¹¶æ„å»ºç¤¾åŒºå±‚æ¬¡ç»“æ„ï¼Œç”Ÿæˆè¿™äº›ç¤¾åŒºçš„æ‘˜è¦ï¼Œç„¶ååœ¨æ‰§è¡ŒåŸºäºRAGçš„ä»»åŠ¡æ—¶åˆ©ç”¨è¿™äº›ç»“æ„ã€‚è¿™ç§æ–¹æ³•åœ¨å¤„ç†ç§æœ‰æ•°æ®é›†æ—¶ï¼Œç‰¹åˆ«æ˜¯åœ¨é—®ç­”æ€§èƒ½æ–¹é¢ï¼Œæ˜¾ç¤ºå‡ºäº†å¯¹å¤æ‚ä¿¡æ¯çš„æ¨ç†èƒ½åŠ›ï¼Œç›¸è¾ƒäºä¼ ç»Ÿçš„RAGæŠ€æœ¯æœ‰äº†æ˜¾è‘—æå‡ã€‚  
&nbsp;&nbsp;åœ¨GitHubä¸Šæ¨å‡ºåï¼ŒGraphRAGé¡¹ç›®è¿…é€Ÿè·å¾—äº†ç¤¾åŒºçš„å¹¿æ³›å…³æ³¨ï¼Œè·å¾—äº†2700é¢—starã€‚å¾®è½¯åœ¨å…¶åšå®¢ä¸Šä»‹ç»äº†GraphRAGï¼Œå¹¶æŒ‡å‡ºå®ƒåœ¨å¤„ç†ç§æœ‰æ•°æ®é›†æ—¶ï¼Œå¦‚ä¼ä¸šçš„ä¸“æœ‰ç ”ç©¶ã€å•†ä¸šæ–‡ä»¶æˆ–é€šè®¯ç­‰ï¼Œæä¾›äº†æ˜¾è‘—çš„æ€§èƒ½æå‡ã€‚åœ¨å¤§è§„æ¨¡æ’­å®¢å’Œæ–°é—»æ•°æ®é›†ä¸Šè¿›è¡Œçš„æµ‹è¯•æ˜¾ç¤ºï¼Œåœ¨å…¨é¢æ€§ã€å¤šæ ·æ€§å’Œèµ‹æƒæ€§æ–¹é¢ï¼ŒGraphRAGéƒ½ä¼˜äºæœ´ç´ RAGæŠ€æœ¯ã€‚  
&nbsp;&nbsp;GraphRAGçš„å¼€æºåœ°å€ä¸ºï¼šhttps://github.com/microsoft/graphragï¼Œå¼€å‘è€…ä»¬å¯¹æ­¤è¡¨ç°å‡ºæå¤§çš„å…´è¶£ï¼Œå¹¶æœŸå¾…å°è¯•è¿™ä¸€æŠ€æœ¯ã€‚  
&nbsp;&nbsp;ä¸ä¼ ç»Ÿçš„RAGæ–¹æ³•ç›¸æ¯”ï¼ŒGraphRAGåœ¨å¤„ç†éœ€è¦å…¨å±€ç†è§£çš„æµ·é‡æ•°æ®æŸ¥è¯¢æ—¶ï¼Œèƒ½å¤Ÿæ›´å¥½åœ°æ•æ‰æ–‡æœ¬ä¸­çš„å¤æ‚è”ç³»å’Œäº¤äº’ï¼Œä»è€Œå¢å¼ºå…¶ç”Ÿæˆå’Œæ£€ç´¢èƒ½åŠ›ã€‚å®éªŒç»“æœè¡¨æ˜ï¼ŒGraphRAGåœ¨å…¨é¢æ€§å’Œå¤šæ ·æ€§æµ‹è¯•ä¸Šè¶…è¶Šäº†Naive RAGç­‰æ–¹æ³•ï¼Œå¹¶ä¸”å…·æœ‰è¾ƒä½çš„èµ„æºéœ€æ±‚ã€‚  
&nbsp;&nbsp;æ€»çš„æ¥è¯´ï¼ŒGraphRAGæ˜¯å¾®è½¯åœ¨å¢å¼ºå¤§è¯­è¨€æ¨¡å‹èƒ½åŠ›æ–¹é¢çš„ä¸€å¤§è¿›æ­¥ï¼Œå®ƒé€šè¿‡æ„å»ºçŸ¥è¯†å›¾è°±å’Œå›¾æœºå™¨å­¦ä¹ ï¼Œæå¤§åœ°å¢å¼ºäº†LLMåœ¨å¤„ç†ç§æœ‰æ•°æ®æ—¶çš„æ€§èƒ½ï¼Œå°¤å…¶æ˜¯åœ¨è·¨å¤§å‹æ•°æ®é›†çš„å¤æ‚è¯­ä¹‰é—®é¢˜æ¨ç†èƒ½åŠ›æ–¹é¢ã€‚  

# ç¯å¢ƒéƒ¨ç½²
``` shell
git clone git@github.com:microsoft/graphrag.git

cd graphrag

poetry install ## æµ‹è¯•ç›´æ¥é‡‡ç”¨poetryè¿è¡Œæœ¬åœ°æ–‡ä»¶, wheelåŒ…ç›®å‰è‡ªæµ‹ä¸‹æ¥æœ‰å‘, ç›´æ¥pipå®‰è£…æœ‰é—®é¢˜

## æ–°å»ºgraphrag é¡¹ç›®
poetry run poe index --root ~/trumprag/ --init

## åˆ›å»ºè¾“å…¥
mkdir -p ~/trumprag/input


## ä¸Šä¼ æ–°é—»ç¨¿åˆ°inputç›®å½•ä¸‹
## æ¥æº: https://finance.eastmoney.com/a/202407143130425967.html

## æœ¬åœ°èµ·one-apiæœåŠ¡
## https://github.com/songquanpeng/one-api
## one-apiéƒ¨ç½²æ‰‹å†Œè§ï¼šhttps://github.com/songquanpeng/one-api?tab=readme-ov-file#%E6%89%8B%E5%8A%A8%E9%83%A8%E7%BD%B2

##ä¿®æ”¹setting.yaml
## è§https://github.com/flyrae/trumprag/blob/main/settings.yaml

```

# è¿è¡Œ

1. è¿è¡ŒIndexing Engine  
`poetry run poe index --root ~/trumprag/`  
æœ€åå¾—åˆ°ä¸‹é¢çš„æ—¥å¿—åˆ™è¯´æ˜æˆåŠŸæ‰§è¡Œã€‚
``` log
â ™ GraphRAG Indexer
â”œâ”€â”€ Loading Input (text) - 1 files loaded (0 filtered) â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â” 100% 0:00:00 0:00:00
â”œâ”€â”€ create_base_text_units
â”œâ”€â”€ create_base_extracted_entities
â”œâ”€â”€ create_summarized_entities
â”œâ”€â”€ create_base_entity_graph
â”œâ”€â”€ create_final_entities
â”œâ”€â”€ create_final_nodes
â”œâ”€â”€ create_final_communities
â”œâ”€â”€ join_text_units_to_entity_ids
â”œâ”€â”€ create_final_relationships
â”œâ”€â”€ join_text_units_to_relationship_ids
â”œâ”€â”€ create_final_community_reports
â”œâ”€â”€ create_final_text_units
â”œâ”€â”€ create_base_documents
â””â”€â”€ create_final_documents
ğŸš€ All workflows completed successfully.

```

2. è¿è¡ŒæŸ¥è¯¢  
` poetry run poe query --root ~/trumprag/ --method global "ç‰¹æœ—æ™®å‘ç”Ÿäº†ä»€ä¹ˆäº‹"`   

``` log
INFO: Reading settings from /root/trumprag/settings.yaml
creating llm client with {'api_key': 'REDACTED,len=35', 'type': "openai_chat", 'model': 'qwen2-72b-instruct', 'max_tokens': 2000, 'temperature': 0.0, 'top_p': 0.9, 'n': 1, 'request_timeout': 180.0, 'api_base': 'https://dashscope.aliyuncs.com/compatible-mode/v1', 'api_version': None, 'organization': None, 'proxy': None, 'cognitive_services_endpoint': None, 'deployment_name': None, 'model_supports_json': False, 'tokens_per_minute': 300000, 'requests_per_minute': 30, 'max_retries': 3, 'max_retry_wait': 10.0, 'sleep_on_rate_limit_recommendation': True, 'concurrent_requests': 1}

SUCCESS: Global Search Response: # ç‰¹æœ—æ™®åœ¨å®¾å¤•æ³•å°¼äºšå·ç«é€‰é›†ä¼šä¸Šé­é‡æªå‡»äº‹ä»¶çš„ç»¼åˆæŠ¥å‘Š

## äº‹ä»¶æ¦‚è¿°
åœ¨å®¾å¤•æ³•å°¼äºšå·å·´ç‰¹å‹’å¸‚çš„ä¸€æ¬¡ç«é€‰é›†ä¼šä¸Šï¼Œç‰¹æœ—æ™®é­é‡äº†æªå‡»äº‹ä»¶ï¼Œè¿™ä¸€çªå‘äº‹ä»¶å¯¼è‡´äº†äººå‘˜ä¼¤äº¡ï¼Œè¿«ä½¿é›†ä¼šè¢«ä¸­æ–­ï¼Œå¯èƒ½ä¼šå¼•å‘æ”¿æ²»å’Œç¤¾ä¼šåŠ¨è¡ [Data: Reports (2)]ã€‚

## å®‰å…¨å“åº”
ç‰¹å‹¤å±€è¿…é€Ÿé‡‡å–è¡ŒåŠ¨ï¼Œæœ‰æ•ˆåœ°ä¿æŠ¤å¹¶ç–æ•£äº†ç‰¹æœ—æ™®ï¼Œç¡®ä¿äº†ä»–çš„ä¸ªäººå®‰å…¨ã€‚è¿™ä¸€ä¸“ä¸šå’ŒåŠæ—¶çš„ååº”é¿å…äº†æ›´ä¸¥é‡çš„åæœ [Data: Reports (2)]ã€‚

## æ€»ç»Ÿå…³æ³¨
ä½œä¸ºç°ä»»æ€»ç»Ÿï¼Œæ‹œç™»æ¥æ”¶åˆ°å…³äºè¿™æ¬¡æªå‡»äº‹ä»¶çš„åˆæ­¥ç®€æŠ¥ï¼Œè¡¨æ˜æ”¿åºœæ­£åœ¨å¯†åˆ‡å…³æ³¨äº‹æ€å‘å±• [Data: Reports (2)]ã€‚

## ç›®å‡»è€…è¯è¨€
ç½—æ©Â·ç©†æ–¯ä½œä¸ºç°åœºç›®å‡»è€…ï¼Œæä¾›äº†å…³é”®è¯è¯ï¼Œè¿™å¯¹äºäº‹ä»¶çš„åç»­è°ƒæŸ¥å°†èµ·åˆ°é‡è¦ä½œç”¨ [Data: Reports (2)]ã€‚

## åœ°æ–¹å®‰å…¨ç–‘è™‘
æ­¤æ¬¡äº‹ä»¶çš„å‘ç”Ÿåœ°ç‚¹å·´ç‰¹å‹’å¸‚ï¼Œå…¶å…¬å…±å®‰å…¨å’Œå±æœºåº”å¯¹èƒ½åŠ›å—åˆ°äº†å…¬ä¼—çš„è´¨ç–‘ï¼Œè¿™å¯èƒ½å½±å“åˆ°å½“åœ°æ°‘ä¼—å¯¹æ”¿åºœçš„ä¿¡ä»»åº¦ä»¥åŠæœªæ¥çš„å…¬å…±æ´»åŠ¨å®‰æ’ [Data: Reports (2)]ã€‚

ç»¼ä¸Šæ‰€è¿°ï¼Œç‰¹æœ—æ™®åœ¨å·´ç‰¹å‹’å¸‚çš„ç«é€‰é›†ä¼šä¸Šé­é‡çš„æªå‡»äº‹ä»¶ä¸ä»…æ˜¯ä¸€ä¸ªä¸¥é‡çš„å®‰å…¨é—®é¢˜ï¼Œè¿˜ç‰µæ¶‰åˆ°äº†æ”¿æ²»ç¨³å®šã€æ”¿åºœå“åº”èƒ½åŠ›å’Œåœ°æ–¹æ²»å®‰ç­‰å¤šæ–¹é¢è®®é¢˜ã€‚
```


